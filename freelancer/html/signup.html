<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Create Account — Skiloora</title>
  <link rel="stylesheet" href="../css/signup.css" />
  <script src="../js/signup.js" defer></script>
  <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
  <!-- Firebase App (add existing SDK code you already have) -->
<script type="module">
  // Example modular v9+ usage - replace config with your firebaseConfig
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-app.js";
  import { getAuth, createUserWithEmailAndPassword, signOut } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-auth.js";
  import { getFirestore, doc, setDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyCapHhekRDGOxzSgfu6CCvDVBnj9D-5TtU",
    authDomain: "skiloora.firebaseapp.com",
    projectId: "skiloora",
    storageBucket: "skiloora.firebasestorage.app",
    messagingSenderId: "955346781606",
    appId: "1:955346781606:web:6538ba1ebd56574bd43b67",
    measurementId: "G-Z0CKCX3HPT"
  };

  const app = initializeApp(firebaseConfig);
  window.firebaseAuth = getAuth(app);
  window.firebaseDB = getFirestore(app);
  window.__createBuyerAccount = async function({name,email,password}){
    // Create Firebase auth user then Firestore document with role 'buyer'
    const cred = await createUserWithEmailAndPassword(window.firebaseAuth, email, password);
    const uid = cred.user.uid;
    await setDoc(doc(window.firebaseDB, 'users', uid), { name, email, role: 'buyer', createdAt: serverTimestamp() }, { merge: true });
    await signOut(window.firebaseAuth); // force login via unified login page
  };
</script>

</head>
<body>
  <header class="topbar">
    <div class="container topbar-inner">
      <div class="brand">Skiloora</div>
    </div>
  </header>

  <main class="signup-page">
    <div class="container signup-inner">

      <div class="left-col">
        <h1 class="page-title">Create Account</h1>
        <p class="lead">Join thousands of freelancers and clients</p>

        <!-- Role selector -->
        <div class="role-selector" role="tablist" aria-label="Choose account type">
          <button class="role-card active" data-role="hirer" id="role-hirer" type="button" aria-pressed="true">
            <div class="role-title">Hirer</div>
            <div class="role-sub">Hire top talent</div>
          </button>

          <button class="role-card" data-role="freelancer" id="role-freelancer" type="button" aria-pressed="false">
            <div class="role-title">Freelancer</div>
            <div class="role-sub">Offer your services</div>
          </button>
        </div>

        <!-- HIRER form (buyer) -->
        <form id="hirerForm" class="signup-form" onsubmit="return handleHirer(event)">
          <input type="hidden" name="role" value="hirer">
          <label class="field-label" for="hirerName">Full name</label>
          <input type="text" id="hirerName" class="field" placeholder="Your name" required autocomplete="name">

          <label class="field-label" for="hirerEmail">Email</label>
          <input type="email" id="hirerEmail" class="field" placeholder="name@example.com" required autocomplete="email">

          <label class="field-label" for="hirerPassword">Password</label>
          <input type="password" id="hirerPassword" class="field" placeholder="Password" required autocomplete="new-password">

          <label class="field-label" for="hirerConfirm">Confirm Password</label>
          <input type="password" id="hirerConfirm" class="field" placeholder="Confirm password" required autocomplete="new-password">

          <div class="terms">
            <input type="checkbox" id="hirerTos">
            <label for="hirerTos">I agree to the Terms of Service and Privacy Policy</label>
          </div>

          <div class="form-actions">
            <button type="submit" class="btn btn-primary">Create Account</button>
          </div>

          <p class="signin-link">Already have an account? <span class="link-like" onclick="location.href='login.html'">Sign in</span></p>
        </form>

        <!-- FREELANCER form (detailed) -->
        <form id="freelancerForm" class="signup-form hidden" onsubmit="return handleFreelancer(event)">
          <input type="hidden" name="role" value="freelancer">
          <label class="field-label" for="freeName">Full name</label>
          <input type="text" id="freeName" class="field" placeholder="Your name" required autocomplete="name">

          <label class="field-label" for="freeEmail">Email</label>
          <input type="email" id="freeEmail" class="field" placeholder="name@example.com" required autocomplete="email">

          <label class="field-label" for="freeLocation">Location</label>
          <input type="text" id="freeLocation" class="field" placeholder="City, Country" autocomplete="address-level2">

          <label class="field-label" for="freePassword">Password</label>
          <input type="password" id="freePassword" class="field" placeholder="Password" required autocomplete="new-password">

          <label class="field-label" for="freeConfirm">Confirm Password</label>
          <input type="password" id="freeConfirm" class="field" placeholder="Confirm password" required autocomplete="new-password">

          <label class="field-label">ID Proof (Aadhar / PAN) - optional</label>
          <div class="file-row">
            <input type="file" id="idProof" accept=".jpg,.png,.pdf" />
            <button type="button" class="btn-file-view" id="viewFileBtn" style="display:none">View</button>
          </div>

          <div class="note">Further information can be updated anytime in the Edit Profile section.</div>

          <div class="form-actions">
            <!-- NOTE: Next triggers the modal overlay inside this SAME page -->
            <button id="nextBtn" type="button" class="btn btn-primary">Next</button>
          </div>

          <p class="signin-link">Already have an account? <span class="link-like" onclick="location.href='login.html'">Sign in</span></p>
        </form>

      </div>

      <aside class="right-col" aria-hidden="true">
        <!-- optional decorative image (local uploaded path) -->
        <img class="hero-image" 
     src="https://images.unsplash.com/photo-1521737604893-d14cc237f11d?auto=format&fit=crop&w=800&q=60"
     alt="Freelancer illustration">

      </aside>

    </div>
  </main>

  <!-- PAYMENT MODAL (appears inside the signup page) -->
  <div id="paymentOverlay" class="overlay hidden" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="paymentTitle">
      <div class="modal-header">
        <h2 id="paymentTitle">Choose Plan</h2>
        <button id="modalBack" class="btn btn-outline">Back</button>
      </div>

      <div class="modal-body">
        <div class="plans">
          <label class="plan-card">
            <input type="radio" name="plan" value="standard" checked>
            <div class="plan-price">₹2999</div>
            <div class="plan-title">Standard</div>
            <ul class="plan-features">
              <li>Basic features</li>
              <li>Simple task</li>
              <li>Whatsapp support</li>
              <li>72h response time</li>
            </ul>
            <div class="plan-action">
              <button class="btn plan-select">Select</button>
            </div>
          </label>

          <label class="plan-card">
            <input type="radio" name="plan" value="premium">
            <div class="plan-price">₹3999</div>
            <div class="plan-title">Premium</div>
            <ul class="plan-features">
              <li>Advanced features</li>
              <li>Unlimited Project</li>
              <li>Whatsapp support</li>
              <li>24h response time</li>
            </ul>
            <div class="plan-action">
              <button class="btn plan-select">Select</button>
            </div>
          </label>
        </div>
      </div>

      <div class="modal-footer">
        <button id="modalContinue" class="btn btn-primary" disabled>Continue</button>
      </div>
    </div>
  </div>
</body>
</html>
