<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Skiloora — Edit Profile</title>
  <link rel="stylesheet" href="../css/edit-profile.css" />
  <script src="https://www.gstatic.com/firebasejs/12.6.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/12.6.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/12.6.0/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/12.6.0/firebase-storage-compat.js"></script>
  <script>
    const cfg = {
      apiKey: "AIzaSyCapHhekRDGOxzSgfu6CCvDVBnj9D-5TtU",
      authDomain: "skiloora.firebaseapp.com",
      projectId: "skiloora",
      storageBucket: "skiloora.appspot.com",
      messagingSenderId: "955346781606",
      appId: "1:955346781606:web:6538ba1ebd56574bd43b67",
      measurementId: "G-Z0CKCX3HPT"
    };
    try{ if(!window.firebaseApp){ window.firebaseApp = firebase.initializeApp(cfg);} }catch(e){}
    window.firebaseAuth = firebase.auth();
    window.firebaseDB = firebase.firestore();
    window.firebaseStorage = firebase.storage();
  </script>
  <script defer src="../js/edit-profile.js"></script>
</head>
<body>
  <main class="container">
    <header class="header">
      <h1>Edit Profile</h1>
      <button class="btn-ghost" id="cancelEdit">Cancel</button>
    </header>
    
    <section class="card" aria-labelledby="profileFormTitle">
      <h2 id="profileFormTitle" class="visually-hidden">Profile Details</h2>
      <div class="grid">
        <div class="avatar-block">
          <div class="avatar" id="avatarPreview" aria-label="Avatar preview" role="img"></div>
          <div class="avatar-actions">
            <label class="btn-ghost small" for="editAvatarFile">Upload Avatar</label>
            <button class="btn-ghost small" id="removeAvatar">Remove</button>
          </div>
          <input id="editAvatarFile" type="file" accept="image/*" hidden />
        </div>
        <label for="editName">Name<input id="editName" name="name" autocomplete="name" /></label>
        <label for="editEmail">Email<input id="editEmail" name="email" autocomplete="email" disabled /></label>
        <label for="editPhone">Phone<input id="editPhone" name="tel" autocomplete="tel" /></label>
        <label for="editLocation">Location<input id="editLocation" name="address-level2" autocomplete="address-level2" /></label>
        <label for="editRate">Hourly Rate
          <div class="rate-control">
            <button type="button" class="rate-btn" id="rateDec" aria-label="Decrease rate">−</button>
            <input id="editRate" name="hourly-rate" type="number" inputmode="decimal" min="0" step="50" />
            <button type="button" class="rate-btn" id="rateInc" aria-label="Increase rate">+</button>
            <span class="rate-suffix">/ hour</span>
          </div>
        </label>
        <label for="editPrimaryRole">Primary Role
          <select id="editPrimaryRole">
            <option value="">Select role</option>
            <option value="Full Stack Developer">Full Stack Developer</option>
            <option value="UI/UX Designer">UI/UX Designer</option>
            <option value="UI/UX Developer">UI/UX Developer</option>
            <option value="Frontend Developer">Frontend Developer</option>
            <option value="Backend Developer">Backend Developer</option>
            <option value="Data Analyst">Data Analyst</option>
            <option value="AI Engineer">AI Engineer</option>
          </select>
        </label>
        <label for="editBio">Bio<textarea id="editBio" name="bio" rows="3" placeholder="Short professional bio"></textarea></label>
        <label for="editGithub">GitHub<input id="editGithub" name="github" placeholder="github.com/username" inputmode="url" /></label>
        <label for="editDribbble">Dribbble<input id="editDribbble" name="dribbble" placeholder="dribbble.com/username" inputmode="url" /></label>
        <label for="editLinkedin">LinkedIn<input id="editLinkedin" name="linkedin" placeholder="linkedin.com/in/username" inputmode="url" /></label>
        <label for="editX">X (Twitter)<input id="editX" name="x" placeholder="x.com/handle" inputmode="url" /></label>
      </div>
      <div class="row">
        <div class="fieldset">
          <div class="legend">Language</div>
          <div id="editLangList" class="chips-row"></div>
          <div class="chip-editor"><input id="editLangInput" placeholder="Add language" aria-label="Add language" /><button id="addLangBtn" class="btn-ghost small" aria-label="Add language">+</button></div>
        </div>
      </div>
      <div class="row">
        <div class="fieldset">
          <div class="legend">Certifications</div>
          <div id="editCertsList" class="stack-list"></div>
          <div class="chip-editor"><input id="editCertsInput" placeholder="Add certification" aria-label="Add certification" /><button id="addCertBtn" class="btn-ghost small" aria-label="Add certification">+</button></div>
        </div>
      </div>
      <div class="row">
        <div class="fieldset">
          <div class="legend">Skills</div>
          <div id="editSkillsList" class="chips-row"></div>
          <div class="chip-editor"><input id="editSkillsInput" placeholder="Add skill" aria-label="Add skill" /><button id="addSkillBtn" class="btn-ghost small" aria-label="Add skill">+</button></div>
        </div>
      </div>
      <label for="editEducation">Education<textarea id="editEducation" name="education" rows="3"></textarea></label>
      <div class="actions"><button class="btn" id="saveProfile">Save</button></div>
    </section>
  </main>
  <script>
    (function(){
      const inc = document.getElementById('rateInc');
      const dec = document.getElementById('rateDec');
      const input = document.getElementById('editRate');
      if(inc && dec && input){
        const step = Number(input.step) || 50;
        inc.addEventListener('click', ()=>{ const v = Number(input.value||0); input.value = String(v + step); });
        dec.addEventListener('click', ()=>{ const v = Number(input.value||0); const next = v - step; input.value = String(next < 0 ? 0 : next); });
      }
    })();
  </script>
</body>
</html>
